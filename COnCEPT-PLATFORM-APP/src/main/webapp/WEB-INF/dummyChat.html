<!DOCTYPE html>
<html>
    <head>
        <title>WebSocket Stomp Receiving Example</title>
    </head>
    <body>

        <button onclick="dummySend()" >Dummy Send!</button>

        <div>
            <h3>Messages:</h3>
            <ol id="messages"></ol>
        </div>

        <!-- COnCEPT-Chat JS -->
        <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/1.11.2/jquery.min.js"></script>
        <script type="text/javascript" src="//cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>




        <script type="text/javascript">

            var stompClient;

            $(document).ready(function () {
                var messageList = $("#messages");
                // defined a connection to a new socket endpoint
                var socket = new SockJS('/concept-chat');
                stompClient = Stomp.over(socket);
                stompClient.connect({}, function (frame) {
                    // subscribe to the /topic/message endpoint
                    stompClient.subscribe("/topic/project1", function (data) {
                        var message = data.body;
                        messageList.append("<li>" + message + "</li>");
                    });
                });

            });


            function dummySend() {
                console.log("Dummy send ...");
                stompClient.send("/topic/project1", {priority: 9}, "Hello, STOMP");
            }
        </script>
    </body>
</html>